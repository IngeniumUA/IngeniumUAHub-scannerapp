# screen where the qr code is scanned

<ScanScreen>:
    # button to go to history screen
    MDIconButton:
        icon: "history"
        pos_hint: {"center_x":0.93, "center_y":0.85}
        size_hint: 0.05, 0.05
        on_release:
            root.goto_history_screen()

    # button to go to settings_screen
    MDIconButton:
        icon: "cog"
        id: goto_settings
        pos_hint: {"center_x":0.07, "y":0.83}
        size_hint: 0.04, 0.04
        on_release:
            root.goto_settings_screen()

    # button to go to take picture if enabled
    MDIconButton:
        icon: "camera-outline"
        id: take_picture
        pos_hint: {"x":0.8, "y":0.83}
        size_hint: 0.04, 0.04
        on_release:
            root.ids.preview.capture_photo()

    # call class to decipher qr code and show camera
    ScanAnalyze:
        size_hint_y: 0.8
        size_hint_x: 0.98
        pos_hint: {"x":0.01, "y":0}
        id:preview
        extracted_data: root.got_result

    # label that shows error message if no event is selected
    MDLabel:
        id: event_empty
		size_hint_y: None
		height:'30dp'
		size_hint_x: 0.7
        pos_hint: {"x":0.15, "y":0.4}
		halign: 'center'
		color: 1,0,0,1
		text: "Selecteer eerst een evenement"
		opacity: 1
		font_size: 100
		font_name: 'app/assets/D-DIN.otf'

    # back to login screen button
    Button:
        size_hint_y: 0.08
        size_hint_x: 0.98
        pos_hint: {"x":0.01, "y":0.9}
        text: "Terug"
        font_name: 'app/assets/D-DIN.otf'
        color: 1,1,1,1
        background_normal: 'app/assets/buttonnormal.png'
        background_down: 'app/assets/buttondown.png'
        on_release:
            root.manager.transition.direction = "right"
            root.manager.current = "login"
